<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Win5x Admin Panel</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <h2>Loading Admin Panel...</h2>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="auth-screen">
        <div class="auth-container">
            <div class="auth-header">
                <div class="logo">
                    <i class="fas fa-shield-alt"></i>
                    <h1>Win5x Admin</h1>
                </div>
                <p>Administrative Control Panel</p>
            </div>
            
            <form id="admin-login-form" class="auth-form">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="admin-username" placeholder="Enter admin username" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <div class="password-input">
                        <input type="password" id="admin-password" placeholder="Enter admin password" required>
                        <button type="button" class="password-toggle" onclick="togglePassword('admin-password')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i>
                    Admin Login
                </button>
            </form>

            <div class="demo-credentials">
                <p>Default Admin Credentials:</p>
                <code>admin / Admin123!</code>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="admin-screen" class="admin-screen hidden">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-dice"></i>
                    <span>Win5x</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" onclick="showPage('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('payments')">
                    <i class="fas fa-credit-card"></i>
                    <span>Payments</span>
                    <span id="pending-payments-badge" class="badge hidden">0</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('users')">
                    <i class="fas fa-users"></i>
                    <span>Users</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('bets')">
                    <i class="fas fa-gamepad"></i>
                    <span>Bets</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('rounds')">
                    <i class="fas fa-history"></i>
                    <span>Rounds</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('analytics')">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </a>
                <a href="#" class="nav-item" onclick="showPage('settings')">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <button class="logout-btn" onclick="adminLogout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="admin-header">
                <div class="header-left">
                    <h1 id="page-title">Dashboard</h1>
                    <div class="breadcrumb">
                        <span>Admin</span>
                        <i class="fas fa-chevron-right"></i>
                        <span id="breadcrumb-current">Dashboard</span>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="connection-status">
                        <div id="admin-connection-indicator" class="connection-dot"></div>
                        <span id="admin-connection-text">Connecting...</span>
                    </div>
                    
                    <div class="admin-info">
                        <div class="admin-avatar">
                            <span id="admin-initial">A</span>
                        </div>
                        <div class="admin-details">
                            <span id="admin-username">Admin</span>
                            <span id="admin-role">Administrator</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon users">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-users">0</h3>
                            <p>Total Users</p>
                            <span class="stat-change positive">+12%</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon revenue">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-revenue">₹0</h3>
                            <p>Total Revenue</p>
                            <span class="stat-change positive">+8%</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon bets">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="total-bets">0</h3>
                            <p>Total Bets</p>
                            <span class="stat-change positive">+15%</span>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon profit">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="house-profit">₹0</h3>
                            <p>House P/L</p>
                            <span class="stat-change positive">+5%</span>
                        </div>
                    </div>
                </div>

                <!-- Current Game Status -->
                <div class="game-status-card">
                    <h3>Live Game Status</h3>
                    <div class="game-status-grid">
                        <div class="status-item">
                            <label>Current Round</label>
                            <span id="current-round-number">#-</span>
                        </div>
                        <div class="status-item">
                            <label>Game Phase</label>
                            <span id="current-phase">Waiting</span>
                        </div>
                        <div class="status-item">
                            <label>Time Remaining</label>
                            <span id="time-remaining">--</span>
                        </div>
                        <div class="status-item">
                            <label>Total Pool</label>
                            <span id="total-pool">₹0</span>
                        </div>
                    </div>
                    
                    <div class="game-controls">
                        <button class="btn btn-danger" onclick="emergencyStop()">
                            <i class="fas fa-stop"></i>
                            Emergency Stop
                        </button>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="recent-activity">
                    <h3>Recent Activity</h3>
                    <div id="admin-activity-feed" class="activity-feed">
                        <!-- Activity items will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Payments Page -->
            <div id="payments-page" class="page">
                <div class="page-header">
                    <h2>Payment Management</h2>
                    <div class="page-actions">
                        <button class="btn btn-primary" onclick="refreshPayments()">
                            <i class="fas fa-refresh"></i>
                            Refresh
                        </button>
                    </div>
                </div>

                <!-- Payment Tabs -->
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchPaymentTab('methods')">QR Methods</button>
                    <button class="tab-btn" onclick="switchPaymentTab('deposits')">
                        Deposits
                        <span id="deposits-badge" class="tab-badge">0</span>
                    </button>
                    <button class="tab-btn" onclick="switchPaymentTab('withdrawals')">
                        Withdrawals
                        <span id="withdrawals-badge" class="tab-badge">0</span>
                    </button>
                </div>

                <!-- Payment Methods Tab -->
                <div id="payment-methods-tab" class="tab-content active">
                    <div class="payment-methods-grid" id="payment-methods-grid">
                        <!-- Payment methods will be loaded here -->
                    </div>
                </div>

                <!-- Deposits Tab -->
                <div id="deposits-tab" class="tab-content">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Amount</th>
                                    <th>Method</th>
                                    <th>UTR Code</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="deposits-table-body">
                                <!-- Deposit requests will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Withdrawals Tab -->
                <div id="withdrawals-tab" class="tab-content">
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Amount</th>
                                    <th>Method</th>
                                    <th>Details</th>
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="withdrawals-table-body">
                                <!-- Withdrawal requests will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Other Pages (Placeholders) -->
            <div id="users-page" class="page">
                <h2>User Management</h2>
                <p>User management interface will be implemented here.</p>
            </div>

            <div id="bets-page" class="page">
                <h2>Bet Management</h2>
                <p>Bet management interface will be implemented here.</p>
            </div>

            <div id="rounds-page" class="page">
                <h2>Game Rounds</h2>
                <p>Round history interface will be implemented here.</p>
            </div>

            <div id="analytics-page" class="page">
                <h2>Analytics & Reports</h2>
                <p>Analytics dashboard will be implemented here.</p>
            </div>

            <div id="settings-page" class="page">
                <h2>Game Settings</h2>
                <p>Game configuration interface will be implemented here.</p>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="qr-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Update QR Code</h3>
                <button class="modal-close" onclick="closeModal('qr-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Payment Method</label>
                    <input type="text" id="qr-method-name" readonly>
                </div>
                <div class="form-group">
                    <label>QR Code URL</label>
                    <input type="url" id="qr-code-url" placeholder="https://example.com/qr-code.png">
                </div>
                <div class="form-group">
                    <label>Wallet Address (for USDT)</label>
                    <input type="text" id="wallet-address" placeholder="Wallet address">
                </div>
                <div class="form-group">
                    <label>Instructions</label>
                    <textarea id="payment-instructions" rows="3" placeholder="Payment instructions for users"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('qr-modal')">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="updatePaymentMethod()">Update</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Action Modal -->
    <div id="action-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="action-modal-title">Process Request</h3>
                <button class="modal-close" onclick="closeModal('action-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="action-request-details" class="request-details">
                    <!-- Request details will be populated here -->
                </div>
                <div class="form-group">
                    <label id="action-notes-label">Admin Notes</label>
                    <textarea id="action-notes" rows="3" placeholder="Optional notes..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('action-modal')">Cancel</button>
                    <button type="button" id="action-confirm-btn" class="btn btn-primary" onclick="confirmAction()">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="admin-notifications" class="notifications-container"></div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.4/socket.io.js"></script>
    <script src="js/admin-utils.js"></script>
    <script src="js/admin-auth.js"></script>
    <script src="js/admin-payments.js"></script>
    <script src="js/admin-dashboard.js"></script>
    <script src="js/admin-app.js"></script>
</body>
</html>